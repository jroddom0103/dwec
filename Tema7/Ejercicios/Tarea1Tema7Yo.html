<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tarea1Tema7</title>
    <!-- Estilos -->
    <style>
        .jumbotron {
            max-height: 180px;
        }

        .card-img-top {
            width: 100%;
            height: 180px;
        }
    </style>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
</head>


<body>
    <div class="container">
        <div class="jumbotron">
            <h1><img src="https://img.icons8.com/color/48/000000/google-photos.png">De todo ...</h1>
            <h5>Ejemplo cálculo de cesta o carrito de la compra...</h5>
        </div>

        <div class="row">
            <!-- Productos -->
            <div id="contProductos" class="col-sm-7 row"></div>
            <!-- Cesta -->
            <div class="col-sm-5">
                <h2><img src="https://img.icons8.com/cute-clipart/64/000000/shopping-basket-success.png"></h2>
                <!-- Información Cesta -->
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th scope="col">Cod.</th>
                            <th scope="col">Nombre</th>
                            <th scope="col">Cantidad</th>
                            <th scope="col">Precio(€)</th>
                            <th scope="col">Subtotal</th>
                        </tr>
                    </thead>
                    <tbody id="cesta"></tbody>

                </table>
                <hr>
                <!-- Precio total -->
                <p class="text-right">Total: <span id="total">0.00</span> €</p>
                <!-- Precio total Iva -->
                <p class="text-right">Total + IVA (21%): <span id="totalIva">0.00</span> €</p>

            </div>
        </div>

    </div>
</body>

<script>

    class Cesta{
        #cesta;
        #productos;

        constructor(productos){
            this.#productos=productos;
        }

        anadirCesta(){

        }
    }

    class ContProductos{
        #productos = [];
        #cesta;
        constructor(productos){
            this.#productos=productos;
            this.#cesta= new Cesta(this.#productos);
            this.anadirProductos();
        }

        anadirProductos(){

            var cont = document.getElementById("contProductos");

            productos.forEach(producto => {
                var card = document.createElement("div");
                card.setAttribute("class", "card col-sm-4")

                var cardBody = document.createElement("div");
                cardBody.setAttribute("class", "card-body")

                var img = document.createElement("img");
                img.setAttribute("src",producto.imagen);
                img.setAttribute("class", "card-img-top")
                img.setAttribute("alt",producto.nombre);

                var title = document.createElement("h5");
                title.setAttribute("class", "card-title");
                title.textContent = producto.nombre;

                var precio = document.createElement("p");
                precio.setAttribute("class", "card-text");
                precio.textContent = producto.precio;

                var input = document.createElement("input");
                input.setAttribute("type", "number");
                input.setAttribute("value", "1");
                input.setAttribute("min", "1");
                input.setAttribute("style", "width:70px; margin-bottom:10px;")
                input.setAttribute("data-iduni", producto.cod);

                var button = document.createElement("button");
                button.setAttribute("class", "btn btn-primary");
                button.textContent = "Añadir";
                button.addEventListener("click", this.#cesta.anadirCesta.bind(this.#cesta,producto.cod));
        
                cardBody.appendChild(img);
                cardBody.appendChild(title);
                cardBody.appendChild(precio);
                cardBody.appendChild(input);
                cardBody.appendChild(button);

                card.appendChild(cardBody);

                cont.appendChild(card);

            });

        }
    }

    //Tabla de productos
    var productos = [
        { cod: 1, nombre: 'Bolso', precio: 20, imagen: 'https://cdn.pixabay.com/photo/2015/08/10/20/14/purse-883112_1280.jpg' },
        { cod: 2, nombre: 'Móvil', precio: 120, imagen: 'https://cdn.pixabay.com/photo/2024/10/09/10/37/ai-generated-9107547_1280.png' },
        { cod: 3, nombre: 'Pelota de golf', precio: 9.99, imagen: 'https://cdn.pixabay.com/photo/2017/08/02/14/31/golf-2571826_1280.jpg' },
        { cod: 4, nombre: 'Zapatos', precio: 49.99, imagen: 'https://cdn.pixabay.com/photo/2017/02/17/15/50/shoes-2074400_1280.jpg' },
        { cod: 5, nombre: 'Pelota de baloncesto', precio: 30, imagen: 'https://cdn.pixabay.com/photo/2022/11/22/20/25/ball-7610545_1280.jpg' },
        { cod: 6, nombre: 'Cámara', precio: 100, imagen: 'https://cdn.pixabay.com/photo/2013/07/13/11/29/camera-158262_1280.png' }

    ]

    window.onload = () => new ContProductos(productos);

</script>

</html>